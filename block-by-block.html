<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>One-Minute Band Song</title>
</head>
<body>
<h1>ðŸŽ¶ One-Minute Full Band Song</h1>
<button id="playBtn">Play Song</button>

<script>
const AudioContext = window.AudioContext || window.webkitAudioContext;
const ctx = new AudioContext();

function playNote(freq, startTime, duration, type="sine", volume=0.2) {
    const osc = ctx.createOscillator();
    const gain = ctx.createGain();
    osc.type = type;
    osc.frequency.value = freq;
    gain.gain.value = volume;
    osc.connect(gain).connect(ctx.destination);
    osc.start(startTime);
    osc.stop(startTime + duration);
}

// Instrument frequency sets (simulating timbres)
const instruments = [
    {name: "Flute", freqs: [880, 988], type: "sine"},
    {name: "Clarinet", freqs: [440, 554], type: "square"},
    {name: "Oboe", freqs: [660, 784], type: "triangle"},
    {name: "Bassoon", freqs: [220, 247], type: "sawtooth"},
    {name: "Saxophone", freqs: [392, 440], type: "square"},
    {name: "Trumpet", freqs: [523, 659], type: "square"},
    {name: "Trombone", freqs: [196, 220], type: "triangle"},
    {name: "French Horn", freqs: [330, 392], type: "sawtooth"},
    {name: "Tuba", freqs: [110, 130], type: "triangle"},
    {name: "Piano", freqs: [262, 330], type: "sine"},
    {name: "String Bass", freqs: [98, 110], type: "triangle"},
    {name: "Glockenspiel", freqs: [1046, 1174], type: "sine"},
    {name: "Snare", freqs: [200, 300], type: "square"},
    {name: "Bass Drum", freqs: [60, 80], type: "sine"},
    {name: "Cymbals", freqs: [2000, 2500], type: "triangle"},
    {name: "Timpani", freqs: [130, 196], type: "sine"}
];

document.getElementById("playBtn").addEventListener("click", () => {
    const start = ctx.currentTime;
    let t = start;
    const beat = 0.25; // quarter beat

    // Loop through 60 seconds worth of beats
    for (let i = 0; i < 240; i++) {
        instruments.forEach((inst, idx) => {
            const freq = inst.freqs[i % inst.freqs.length];
            playNote(freq, t, beat * 0.9, inst.type, 0.05);
        });
        t += beat;
    }
});
</script>
</body>
</html>
